<template name="CpanelWelcome">
    {{#if currentUser}}
        {{#if role}}
            {{> CpanelWelcomeConfig}}
        {{else}}
            {{> CpanelWelcomeAccessDenied}}
        {{/if}}
    {{else}}
        {{> CpanelWelcomeLogin}}
    {{/if}}
</template>

<!--Login-->
<template name="CpanelWelcomeLogin">
    {{#autoForm schema=Cpanel.Schema.WelcomeLogin id="CpanelWelcomeLogin"}}
        <div class="form-group has-feedback{{#if afFieldIsInvalid name="username"}} has-error{{/if}}">
            {{> afFieldInput name="username" placeholder="Username"}}
            <span class="glyphicon glyphicon-user form-control-feedback"></span>
            {{#if afFieldIsInvalid name="username"}}
                <span class="help-block">{{afFieldMessage name="username"}}</span>
            {{/if}}
        </div>

        <div class="form-group has-feedback{{#if afFieldIsInvalid name="password"}} has-error{{/if}}">
            {{> afFieldInput  type="password" name="password" placeholder="Password"}}
            <span class="glyphicon glyphicon-lock form-control-feedback"></span>
            {{#if afFieldIsInvalid name="password"}}
                <span class="help-block">{{afFieldMessage name="password"}}</span>
            {{/if}}
        </div>

        <div class="row">
            <div class="col-xs-12">
                <button type="submit" class="btn btn-primary btn-block btn-flat">
                    <span class="glyphicon glyphicon-log-in"></span> Sign In
                </button>
            </div>
        </div>
    {{/autoForm}}
</template>


<!--Access Denied-->
<template name="CpanelWelcomeAccessDenied">
    <div class="alert alert-danger" role="alert">
        <h2>[403]</h2>

        <p>
            Sorry, you couldn't access this application. Please contact administrator.
        </p>
    </div>
</template>

<!--Config-->
<template name="CpanelWelcomeConfig">
    {{#if templateSubsReady}}
        {{#autoForm schema=Cpanel.Schema.WelcomeConfig id="CpanelWelcomeConfig" type="normal"}}
            <div class="row">
                <div class="col-xs-12">
                    {{> afQuickField name="module"}}
                    {{> afQuickField name="branch"}}
                </div>
            </div>

            <div class="row">
                <div class="col-xs-6">
                    <button type="submit" class="btn btn-primary btn-block btn-flat">
                        <i class="fa fa-angle-double-right"></i> Go
                    </button>
                </div>
                <div class="col-xs-6">
                    <button type="button" class="btn btn-danger btn-block btn-flat js-sign-out">
                        <span class="glyphicon glyphicon-log-out"></span> Sign Out
                    </button>
                </div>
            </div>
        {{/autoForm}}

    {{else}}
        <div class="text-center">
            {{> iconLoading}}
        </div>
    {{/if}}
</template>
